initialise: enable-camera apt-installs set-python install-poetry install

install:
	poetry install --no-dev --extras picamera

set-python:
	sudo update-alternatives --install /usr/local/bin/python python /usr/bin/python2 1
	sudo update-alternatives --install /usr/local/bin/python python /usr/bin/python3 2

install-poetry:
	curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python
	sudo ln -sf /home/pi/.poetry/bin/poetry /usr/local/bin/

apt-installs:
	sudo apt-get update
	sudo apt-get install -y python3-pip python3-venv vim screen

enable-camera:
	cat /boot/config.txt | grep -v start_x > /tmp/config.txt
	echo start_x=1 >> /tmp/config.txt
	sudo cp /tmp/config.txt /boot/

include make/*
